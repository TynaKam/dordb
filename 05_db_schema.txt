CREATE TABLE ROLE 
(
ID_ROLE 	LONG 		NOT NULL, 
ROLE_NAME 	VARCHAR2(50) 	NOT NULL, 
CONSTRAINT 	ROLE_PK 	PRIMARY KEY (ID_ROLE)
);


CREATE TABLE APPUSERROLE 
(
ID_APP_USER_ROLE 	NUMBER 		NOT NULL,
ID_APP_USER 		NUMBER 		NOT NULL,
ID_ROLE 		VARCHAR2(20) 	NOT NULL,
CONSTRAINT APPUSERROLE_PK PRIMARY KEY (ID_APP_USER_ROLE)
);


CREATE TABLE APPUSER 
(
ID_APP_USER 	NUMBER 		NOT NULL,
USERNAME 	VARCHAR2(50) 	NOT NULL,
PASSWORD 	VARCHAR2(256) 	NOT NULL,
NAME 		VARCHAR2(50),
SURNAME 	VARCHAR2(50),
EMAIL 		VARCHAR2(50),
RATING 		VARCHAR2(20),
CONSTRAINT APPUSER_PK PRIMARY KEY(ID_APP_USER)
);

CREATE TABLE INGREDIENT 
(
ID_INGREDIENT 	NUMBER 		NOT NULL,
INGREDIENT_NAME VARCHAR2(50) 	NOT NULL,
UNIT VARCHAR2(50 BYTE) 	NOT NULL,
CONSTRAINT INGREDIENT_PK PRIMARY KEY(ID_INGREDIENT)
);

CREATE TABLE RECIPE_INGREDIENT
(
ID_RECIPE_INGREDIENT 	NUMBER NOT NULL,
ID_RECIPE NUMBER 	NOT NULL,
ID_INGREDIENT NUMBER 	NOT NULL,
AMOUT FLOAT(126) 	NOT NULL,
CONSTRAINT "RECIPE_INGREDIENT_PK" PRIMARY KEY ("ID_RECIPE_INGREDIENT")
)
;

CREATE TABLE RECIPE 
(
ID_RECIPE 		NUMBER NOT NULL, 
NAME 			VARCHAR2(100) NOT NULL,
RATE_COUNT		LONG,
RATING			FLOAT,
DESCRIPTION 		VARCHAR2(500),
PREPARATION		BLOB NOT NULL,
ID_APP_USER" 		NUMBER NOT NULL,
CONSTRAINT RECIPE_PK PRIMARY KEY ("ID_RECIPE") 
);

CREATE TABLE CATEGORY 
(
  ID_CATEGORY NUMBER NOT NULL,
  CATEGORY_NAME VARCHAR2(50) NOT NULL, 
  CONSTRAINT CATEGORY_PK PRIMARY KEY  (ID_CATEGORY) ENABLE 
);

CREATE TABLE RECIPE_CATEGORY 
(
  ID_RECIPE_CATEGORY NUMBER NOT NULL, 
  ID_RECIPE NUMBER NOT NULL, 
  ID_CATEGORY NUMBER NOT NULL, 
  CONSTRAINT RECIPE_CATEGORY_PK PRIMARY KEY (ID_RECIPE_CATEGORY)  ENABLE 
);



alter table APPUSER add constraint UQ_USERNAME unique("USERNAME") 

alter table INGREDIENT add constraint UQ_INGREDIENT_NAME unique("INGREDIENT_NAME"); 

alter table ROLE add constraint UQ_ROLE_NAME unique("ROLE_NAME");

alter table APPUSERROLE add constraint FK_APPUSERROLE_ROLE foreign key("ID_ROLE") references "ROLE"("ID_ROLE");

alter table APPUSERROLE add constraint FK_APPUSERROLE_APPUSER foreign key("ID_APP_USER") references "APPUSER"("ID_APP_USER");

alter table RECIPE_INGREDIENT add constraint FK_RECIPEINGREDIENT_INGREDIENT foreign key("ID_INGREDIENT") references "INGREDIENT"("ID_INGREDIENT");

alter table RECIPE_INGREDIENT ADD CONSTRAINT FK_RECIPEINGREDIENT_INGREDIENT FOREIGN KEY("ID_INGREDIENT") REFERENCES "INGREDIENT" ("ID_INGREDIENT");

alter table RECIPE add constraint FK_RECIPE_APPUSER foreign key("ID_APP_USER") references "APPUSER"("ID_APP_USER");

alter table "DOKAMENKR1"."RECIPE_CATEGORY" add constraint FK_RECIPECATEGORY_RECIPE foreign key("ID_RECIPE") references "RECIPE"("ID_RECIPE")

alter table RECIPE_CATEGORY add constraint FK_RECIPECATEGORY_CATEGORY foreign key ("ID_CATEGORY") references "CATEGORY" (ID_CATEGORY);

CREATE SEQUENCE SEQ_APPUSER
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;
  
  CREATE SEQUENCE SEQ_INGREDIENT
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;
  
  CREATE SEQUENCE SEQ_RECIPE
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;
  
  CREATE SEQUENCE SEQ_RECIPE_INGREDIENT
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;
  
  CREATE SEQUENCE SEQ_APPUSERROLE
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;
  
    
  CREATE SEQUENCE SEQ_ROLE
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;
  
  CREATE SEQUENCE SEQ_CATEGORY
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;
  
    
  CREATE SEQUENCE SEQ_RECIPE_CATEGORY
  START WITH 1
  INCREMENT BY 1
  NOCACHE
  NOCYCLE;




